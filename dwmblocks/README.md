modified version of lukesmith's build
